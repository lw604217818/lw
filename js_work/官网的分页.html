<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>官网的分页</title>
</head>
<style>
*{ padding:0; margin:0; list-style:none;}
ul{ width:438px; height:438px;margin:100px auto 0;padding:0 10px 10px 0;/* background:#eee;*/}
li{ width:136px; height:136px; float:left; margin:10px 0 0 10px; position:relative;}
a{display:block;}
a img{ width:100%; height:100%;}
</style>
<script src="../js/onMove.js"></script>
<script>
window.onload=function(){
	var oUl=document.getElementById('ul1');
	var aLi=oUl.children;
	var oBtn=document.getElementById('btn');
	
	//布局转换
	var aPos={};
	for(var i=0;i<aLi.length;i++){
		aPos[i]={left:aLi[i].offsetLeft,top:aLi[i].offsetTop};
	}
	
	for(var i=0;i<aLi.length;i++){
		aLi[i].style.left=aPos[i].left+'px';
		aLi[i].style.top=aPos[i].top+'px';
		aLi[i].style.position='absolute';
		aLi[i].style.margin=0;
	}
	
	var timer=null;
	//var timer1=null;
	oBtn.onclick=function(){
		clearInterval(timer);
		var n=0;
		timer=setInterval(function(){
			
			(function(index){
				console.log('外面n:'+n);
				move(aLi[n],{width:0,height:0,opacity:0,left:0,top:0},{complete:function(){
					console.log('里面n:'+n);					
					console.log('index:'+index);
					if(index==aLi.length-1){
						n=aLi.length-1;
						
						clearInterval(timer);
						timer=setInterval(function(){							
							move(aLi[n],{width:136,height:136,opacity:1,left:aPos[n].left,top:aPos[n].top});
							n--;
							if(n==-1){
								clearInterval(timer);
							}
						},100);
					}
				}});
			})(n)
			n++;
			if(n==aLi.length){
				clearInterval(timer);
			}
		},100);
	};
};
</script>
<body>
<input type="button" value="下一页" id="btn"/>
<ul id="ul1">
  <li><a href="javascript:;"><img src="../images/work/fenye0.png" width="400" height="400" /></a></li>
  <li><a href="javascript:;"><img src="../images/work/fenye1.png" width="400" height="400" /></a></li>
  <li><a href="javascript:;"><img src="../images/work/fenye2.png" width="400" height="400" /></a></li>
  <li><a href="javascript:;"><img src="../images/work/fenye3.png" width="400" height="400" /></a></li>
  <li><a href="javascript:;"><img src="../images/work/fenye4.png" width="400" height="400" /></a></li>
  <li><a href="javascript:;"><img src="../images/work/fenye5.png" width="400" height="400" /></a></li>
  <li><a href="javascript:;"><img src="../images/work/fenye6.png" width="400" height="400" /></a></li>
  <li><a href="javascript:;"><img src="../images/work/fenye7.png" width="400" height="400" /></a></li>
  <li><a href="javascript:;"><img src="../images/work/fenye8.png" width="400" height="400" /></a></li>
</ul>
</body>
</html>
